<?xml version="1.0" encoding="UTF-8"?>

<!--
  *****************************************************************************************
  * Sparx standard configuration file (designed to be included in other Sparx XDM files).
  * $Id: console.xml,v 1.55 2003-06-22 04:29:34 shahid.shah Exp $
  *****************************************************************************************
-->

<xdm:container xmlns:xdm="http://www.netspective.org/Framework/Commons/XMLDataModel">

    <!-- TODO: the base-dir attribute below is included only because resource loading does not notice file updates (REMOVE before deployment) -->
    <register-freemarker-configuration name="console" base-class="com.netspective.sparx.console.ConsoleServlet" base-dir="c:\Projects\Frameworks\Sparx\src\java\main\com\netspective\sparx\console"/>
    <register-theme name="console" class="com.netspective.sparx.theme.console.ConsoleTheme" resources-path="servlet-context-path:/sparx/theme/console"/>
    <register-value-source class="com.netspective.sparx.console.value.ConsolePageContentPathValueSource"/>

    <panel-type name="console-page-summary" extends="html">
        <frame heading="Overview"/>
        <body config="console" source="content/page-summary.ftl"/>
    </panel-type>

    <panel-type name="console-children-summaries" extends="html">
        <body config="console" source="content/children-summaries.ftl"/>
    </panel-type>

    <panel-type name="console-sibling-summaries" extends="html">
        <body config="console" source="content/sibling-summaries.ftl"/>
    </panel-type>

    <navigation-tree name="console" class="com.netspective.sparx.console.ConsoleNavigationTree">
        <page name="home" caption="Home" heading="Console Home" default="yes">
            <panels style="horizontal">
                <panels style="vertical">
                    <panel type="html">
                        <frame heading="Configuration Overview"/>
                        <body config="console" source="console-page-content:app-overview.ftl"/>
                    </panel>
                    <panel type="console-sibling-summaries">
                        <frame heading="Console Overview"/>
                    </panel>
                    <panel class="com.netspective.sparx.console.panel.LibrariesPanel"/>
                </panels>

                <panels style="vertical">
                    <panel type="html">
                        <frame heading="Welcome"/>
                        <body config="console" source="console-page-content:welcome.ftl"/>
                    </panel>
                    <panel type="html">
                        <frame heading="Console Security"/>
                        <body config="console" source="console-page-content:console-security.ftl"/>
                    </panel>
                </panels>
            </panels>
        </page>
        <page name="project" caption="Project" heading="Project Home">

            <panels>
                <panel type="console-page-summary"/>
                <panel type="html">
                    <frame heading="Sparx Project Source"/>
                    <body config="console" source="console-page-content:documentation.ftl"/>
                </panel>
            </panels>

            <page name="input-source" caption="Input Source">
                <panels>
                    <panel type="html">
                        <frame heading="Sparx Project Input Source File and Dependencies"/>
                        <body config="console" source="console-page-content:documentation.ftl"/>
                    </panel>
                </panels>
            </page>
	        <page name="build" caption="Ant Build" heading="Execute Ant Build Target">
                <panels>
                    <panel type="command" command="dialog,console.ant-build"/>
                </panels>
            </page>
	        <page name="runtime-environment" caption="Runtime Environment">
                <body config="console" source="content/framework/runtime-environment.ftl"/>
            </page>
	        <page name="metrics" caption="Metrics"/>
	        <page name="configuration" caption="Configuration Properties">
	            <page name="servlet" caption="Servlet Config"/>
	            <page name="application" caption="App Config">
                    <body config="console" source="content/home/app-overview.ftl"/>
                </page>
            </page>
	        <page name="access-control" caption="Access Control"/>
        </page>

        <page name="presentation" caption="Presentation">

            <panels>
                <panel type="console-page-summary"/>

                <panel type="console-children-summaries">
                    <frame heading="Presentation Layer Features"/>
                </panel>
            </panels>

	        <page name="navigation" caption="Navigation">
                <panels>
                    <panel type="console-page-summary"/>
                </panels>

                <page name="catalog" caption="Catalog"/>
                <page name="test" caption="Unit Test"/>
	        </page>

	        <page name="dialog" caption="Dialogs" retain-params="selected-dialog-id">
                <panels>
                    <panel type="console-page-summary"/>
                    <panel type="console-children-summaries">
                        <frame heading="Dialog Features"/>
                    </panel>
                </panels>

				<page name="catalog" caption="Catalog">
                    <panels>
                        <panels style="tabbed">
                            <frame heading="Available Dialogs"/>
                            <panel class="com.netspective.sparx.console.panel.presentation.dialogs.DialogsCatalogOverviewPanel"/>
                            <panel class="com.netspective.sparx.console.panel.presentation.dialogs.DialogsCatalogClassesPanel"/>
                        </panels>
                    </panels>
                </page>
				<page name="detail" caption="Dialog" heading="simple-expr:Dialog: ${request:selected-dialog-id}">
                    <panels>
                        <panels style="tabbed">
                            <frame heading="Dialog Details" allow-collapse="yes"/>
                            <panel class="com.netspective.sparx.console.panel.presentation.dialogs.DialogAttributesPanel"/>
                            <panel class="com.netspective.sparx.console.panel.presentation.dialogs.DialogFieldsPanel"/>
                            <panel class="com.netspective.sparx.console.panel.presentation.dialogs.DialogFieldsHtmlPanel"/>
                            <panel class="com.netspective.sparx.console.panel.presentation.dialogs.DialogFieldsValidationPanel"/>
                        </panels>
                        <panel type="command" command="dynamic,simple-expr:dialog,${request:selected-dialog-id}"/>
                    </panels>
                </page>
		        <page name="controls" caption="Controls">
                    <panels>
                        <panel type="console-page-summary"/>
                        <panel type="html">
                            <frame heading="Using Controls (Field Types)"/>
                            <body config="console" source="console-page-content:documentation.ftl"/>
                        </panel>
                    </panels>
                </page>
		        <page name="perspectives" caption="Perspectives">
                    <panels>
                        <panel type="console-page-summary"/>
                        <panel type="html">
                            <frame heading="Using Dialog Data Perspectives"/>
                            <body config="console" source="console-page-content:documentation.ftl"/>
                        </panel>
                    </panels>
                </page>
		        <page name="conditionals" caption="Conditionals">
                    <panels>
                        <panel type="console-page-summary"/>
                        <panel type="html">
                            <frame heading="Using Conditionals"/>
                            <body config="console" source="console-page-content:documentation.ftl"/>
                        </panel>
                    </panels>
                </page>
		        <page name="client-js" caption="JavaScript">
                    <panels>
                        <panel type="console-page-summary"/>
                        <panel type="html">
                            <frame heading="Using Client-side JavaScript"/>
                            <body config="console" source="console-page-content:documentation.ftl"/>
                        </panel>
                    </panels>
                </page>
	        </page>

            <page name="report" caption="Reports"/>
	        <page name="panel" caption="Panels"/>
	        <page name="theme" caption="Themes" class="com.netspective.sparx.theme.console.ThemesPage"/>
        </page>

        <page name="data-management" caption="Data Management">
	        <page name="query" caption="Static Queries">

				<page name="catalog" caption="Catalog" heading="Static SQL Queries" retain-params="selected-query-id">
                    <panels>
                        <panel class="com.netspective.sparx.console.panel.data.sql.StaticQueriesCatalogPanel"/>
                    </panels>
                </page>
                <page name="detail" caption="Documentation" retain-params="selected-query-id">
                    <panels>
                        <panel class="com.netspective.sparx.console.panel.data.sql.QueryDbmsSqlTextsPanel"/>
                        <panel class="com.netspective.sparx.console.panel.data.sql.QueryParametersPanel"/>
                    </panels>
                </page>
				<page name="test" caption="Unit Test" retain-params="selected-query-id">
                    <panels>
                        <panel type="command" command="dynamic,simple-expr:query,${request:selected-query-id},default"/>
                        <panel class="com.netspective.sparx.console.panel.data.sql.QueryDbmsSqlTextsPanel"/>
                        <panel class="com.netspective.sparx.console.panel.data.sql.QueryParametersPanel"/>
                    </panels>
                </page>
	        </page>
	        <page name="dynamic-query" caption="Dynamic Queries">
                <page name="catalog" caption="Catalog" heading="Dynamic SQL Queries" retain-params="query-defn-source,selected-query-defn-id">
                    <panels>
                        <panel class="com.netspective.sparx.console.panel.data.sql.DynamicQueriesCatalogPanel"/>
                    </panels>
                </page>
                <page name="detail" caption="Documentation" retain-params="query-defn-source,selected-query-defn-id">
                    <panels>
                        <panel class="com.netspective.sparx.console.panel.data.sql.dynamic.QueryDefnFieldsPanel"/>
                        <panel class="com.netspective.sparx.console.panel.data.sql.dynamic.QueryDefnJoinsPanel"/>
                        <panel class="com.netspective.sparx.console.panel.data.sql.dynamic.QueryDefnSelectsPanel"/>
                    </panels>
                </page>
                <page name="test" caption="Unit Test" retain-params="query-defn-source,selected-query-defn-id"/>
		        <page name="sql-comparisons" caption="SQL Comparisons"/>
	        </page>
	        <page name="schema" caption="Schemas">
                <page name="schema" caption="Schema" heading="Schema Structure" retain-params="schema-table">
                    <panels>
                        <panels style="tabbed">
                            <frame heading="Schema Tables"/>
                            <panel class="com.netspective.sparx.console.panel.data.schema.SchemaTablesPanel" view="all"/>
                            <panel class="com.netspective.sparx.console.panel.data.schema.SchemaTablesDescriptionsPanel" view="all"/>
                            <panel class="com.netspective.sparx.console.panel.data.schema.SchemaTablesInheritancePanel" view="all"/>
                        </panels>
                    </panels>
                </page>
                <page name="table" caption="Table" heading="Table Documentation" retain-params="schema-table">
                    <panels>
                        <panels style="tabbed">
                            <frame heading="Table Hierarchy" allow-collapse="yes"/>
                            <panel class="com.netspective.sparx.console.panel.data.schema.SchemaTablesPanel" view="active-table"/>
                            <panel class="com.netspective.sparx.console.panel.data.schema.SchemaTablesDescriptionsPanel" view="active-table"/>
                            <panel class="com.netspective.sparx.console.panel.data.schema.SchemaTablesInheritancePanel" view="active-table"/>
                        </panels>
                        <panels style="tabbed">
                            <frame heading="Table Columns"/>
                            <panel class="com.netspective.sparx.console.panel.data.schema.SchemaTableColumnsPanel"/>
                            <panel class="com.netspective.sparx.console.panel.data.schema.SchemaTableColumnsDescrsPanel"/>
                            <panel class="com.netspective.sparx.console.panel.data.schema.SchemaTableColumnsPriKeysPanel"/>
                            <panel class="com.netspective.sparx.console.panel.data.schema.SchemaTableColumnsForeignKeysPanel"/>
                            <panel class="com.netspective.sparx.console.panel.data.schema.SchemaTableColumnsValidationsPanel"/>
                            <panel class="com.netspective.sparx.console.panel.data.schema.SchemaTableColumnsRefByPanel"/>
                            <panel class="com.netspective.sparx.console.panel.data.schema.SchemaTableColumnsInheritancePanel"/>
                            <panel class="com.netspective.sparx.console.panel.data.schema.SchemaTableColumnsDalPanel"/>
                        </panels>
                        <panel class="com.netspective.sparx.console.panel.data.schema.SchemaTableIndexesPanel"/>
                        <panel class="com.netspective.sparx.console.panel.data.schema.SchemaTableDataPanel"/>
                    </panels>
                </page>
                <page name="query-defn" caption="Query Defn" retain-params="schema-table">
                    <panels>
                        <panel class="com.netspective.sparx.console.panel.data.sql.dynamic.QueryDefnFieldsPanel"/>
                        <panel class="com.netspective.sparx.console.panel.data.sql.dynamic.QueryDefnJoinsPanel"/>
                        <panel class="com.netspective.sparx.console.panel.data.sql.dynamic.QueryDefnSelectsPanel"/>
                    </panels>
                </page>
	        </page>
	        <page name="data-source" caption="Data Sources">
                <page name="catalog" caption="Catalog">
                    <panels>
                        <panel class="com.netspective.sparx.console.panel.data.DataSourcesCatalogPanel"/>
                    </panels>
                </page>
                <page name="explorer" caption="SQL Explorer">
                    <panels>
                        <panel type="command" command="dynamic,simple-expr:dialog,console.sql-editor"/>
                    </panels>
                </page>
            </page>
	        <page name="database-policies" caption="Database Policies"/>
        </page>

        <page name="framework" caption="Framework">
            <page name="xdm" caption="XDM">
                <panels>
                    <panel type="console-page-summary"/>
                    <panel type="html">
                        <frame heading="Using XDM"/>
                        <body config="console" source="console-page-content:documentation.ftl"/>
                    </panel>
                </panels>

                <page name="components" caption="Instances">
                    <panels>
                        <panel class="com.netspective.sparx.console.panel.framework.XdmComponentsPanel"/>
                    </panels>
                </page>
                <page name="structure" caption="Structure" retain-params="xdm-class">
                    <panels>
                        <panel class="com.netspective.sparx.console.panel.framework.XdmSchemaStructurePanel"/>
                    </panels>
                </page>
                <page name="detail" caption="Detail" retain-params="xdm-class">
                    <panels style="horizontal">
                        <panel class="com.netspective.sparx.console.panel.framework.XdmSchemaStructurePanel" view="tree" height="320"/>
                        <panels style="tabbed">
                            <frame heading="tabbed"/>
                            <panel class="com.netspective.sparx.console.panel.framework.XdmSchemaStructurePanel" view="detail-ancestors"/>
                            <panel class="com.netspective.sparx.console.panel.framework.XdmSchemaStructurePanel" view="detail"/>
                        </panels>
                    </panels>
                </page>
            </page>

            <page name="commands" caption="Commands">
                <page name="catalog" caption="Catalog" heading="Commands Catalog" retain-params="command-class">
                    <panels>
                        <panel class="com.netspective.sparx.console.panel.framework.CommandsCatalogPanel"/>
                    </panels>
                </page>
                <page name="documentation" caption="Documentation" heading="Command Documentation" retain-params="command-class">
                    <panels>
                        <panel class="com.netspective.sparx.console.panel.framework.CommandsCatalogPanel"/>
                    </panels>
                </page>
            </page>

	        <page name="value-sources" caption="Value Sources">
                <panels>
                    <panel type="console-page-summary"/>
                    <panel type="html">
                        <frame heading="Using Value Sources"/>
                        <body config="console" source="console-page-content:documentation.ftl"/>
                    </panel>
                </panels>

                <page name="catalog" caption="Catalog" heading="Value Sources Catalog" retain-params="value-source-class">
                    <panels>
                        <panel class="com.netspective.sparx.console.panel.framework.ValueSourcesCatalogPanel"/>
                    </panels>
                </page>
                <page name="documentation" caption="Documentation" heading="Value Source Documentation" retain-params="value-source-class">
                    <panels>
                        <panel class="com.netspective.sparx.console.panel.framework.ValueSourcesCatalogPanel"/>
                    </panels>
                </page>
                <page name="usage" caption="Usage" heading="Value Sources Usage" retain-params="value-source-class">
                    <panels>
                        <panel class="com.netspective.sparx.console.panel.framework.ValueSourcesUsagePanel"/>
                    </panels>
                </page>
            </page>
            <page name="templating-engines" caption="Templating Engines"/>
            <page name="dependencies" caption="Library Dependencies"/>
            <page name="connection-providers" caption="Connection Providers"/>
        </page>

        <page name="tools" caption="Tools"/>

        <page name="documents" caption="Documents"/>
    </navigation-tree>

    <dialogs package="console">
        <dialog name="sql-editor" class="com.netspective.sparx.console.form.data.SqlEditorDialog">

            <!-- TODO: setup so that only DML/DQL can be restricted or that it can only run in development mode, etc -->

            <frame heading="SQL Editor"/>
            <field name="data-source" type="select" caption="Data source" choices="data-sources:.*"/>
            <field name="sql" type="memo" caption="SQL" rows="10" cols="60"/>
            <field name="name" type="text" caption="Name"/>
            <field name="rows-per-page" type="integer" caption="Rows per page" default="25"/>
        </dialog>

        <dialog name="ant-build" class="com.netspective.sparx.console.form.AntBuildDialog">
            <frame heading="Ant Build"/>
            <field name="project" type="text" caption="Ant Project File" read-only="yes" default="servlet-context-path:/WEB-INF/build.xml"/>
            <field name="target" type="select" caption="Execute Target" style="radio" choices="ant-build-project-targets:servlet-context-path:/WEB-INF/build.xml" required="yes"/>
        </dialog>
    </dialogs>

</xdm:container>
