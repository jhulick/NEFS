<?xml version="1.0" encoding="UTF-8"?>
<!--
  *****************************************************************************************
  * Sparx standard configuration file (designed to be included in other Sparx XDM files).
  * $Id: sparx.xml,v 1.40 2003-08-12 18:41:36 aye.thu Exp $
  *****************************************************************************************
 -->

 <xdm:container xmlns:xdm="http://www.netspective.org/Framework/Commons/XMLDataModel">

    <register-value-source class="com.netspective.sparx.value.source.ServletContextFileValueSource"/>
    <register-value-source class="com.netspective.sparx.value.source.ServletContextUriValueSource"/>
    <register-value-source class="com.netspective.sparx.value.source.ServletRequestParameterValueSource"/>
    <register-value-source class="com.netspective.sparx.value.source.HttpServletSessionAttributeValueSource"/>
    <register-value-source class="com.netspective.sparx.value.source.DialogPerspectiveExprValueSource"/>
    <register-value-source class="com.netspective.sparx.value.source.DialogFieldValueSource"/>

    <register-theme name="slate" default="yes" class="com.netspective.sparx.theme.basic.BasicTheme" resources-path="servlet-context-path:/sparx/theme/slate">
        <report-skin class="com.netspective.sparx.theme.basic.RecordViewerReportSkin" name="record-viewer"
            panel-class-name-prefix="panel-output" panel-resources-prefix="panel/output" />
        <report-skin class="com.netspective.sparx.theme.basic.RecordEditorReportSkin" name="record-editor"
            panel-class-name-prefix="panel-output" panel-resources-prefix="panel/output"/>
        <report-skin class="com.netspective.sparx.theme.basic.HtmlSingleRowReportPanelSkin" name="detail"
            panel-class-name-prefix="panel-output" panel-resources-prefix="panel/output"/>
    </register-theme>

    <register-command class="com.netspective.sparx.command.RedirectCommand"/>
    <register-command class="com.netspective.sparx.command.DialogCommand"/>
    <register-command class="com.netspective.sparx.command.ValueSourceCommand"/>
    <register-command class="com.netspective.sparx.command.QueryCommand"/>
    <register-command class="com.netspective.sparx.command.QueryDefnCommand"/>

    <register-connection-provider-entry-statistics class="com.netspective.sparx.console.util.ResinDataSourcePoolStatistics"/>
    <register-class-path-provider class="com.netspective.sparx.console.util.ResinCompilingClassPathProvider"/>

    <panel-type name="html" class="com.netspective.sparx.panel.TemplateContentPanel"/>
    <panel-type name="command" class="com.netspective.sparx.panel.HtmlCommandPanel"/>

    <dialog-field-type name="text" class="com.netspective.sparx.form.field.type.TextField"/>
    <dialog-field-type name="boolean" class="com.netspective.sparx.form.field.type.BooleanField"/>
    <dialog-field-type name="currency" class="com.netspective.sparx.form.field.type.CurrencyField"/>
    <dialog-field-type name="select" class="com.netspective.sparx.form.field.type.SelectField"/>
    <dialog-field-type name="static" class="com.netspective.sparx.form.field.type.StaticField"/>
    <dialog-field-type name="integer" class="com.netspective.sparx.form.field.type.IntegerField"/>
    <dialog-field-type name="float" class="com.netspective.sparx.form.field.type.FloatField"/>
    <dialog-field-type name="memo" class="com.netspective.sparx.form.field.type.MemoField"/>
    <dialog-field-type name="text-area" class="com.netspective.sparx.form.field.type.MemoField"/>
    <dialog-field-type name="ssn" class="com.netspective.sparx.form.field.type.SocialSecurityField"/>
    <dialog-field-type name="social-security" class="com.netspective.sparx.form.field.type.SocialSecurityField"/>
    <dialog-field-type name="zip-code" class="com.netspective.sparx.form.field.type.ZipCodeField"/>
    <dialog-field-type name="phone" class="com.netspective.sparx.form.field.type.PhoneField"/>
    <dialog-field-type name="date" class="com.netspective.sparx.form.field.type.DateTimeField">
        <data-type>date-only</data-type>
    </dialog-field-type>
    <dialog-field-type name="time" class="com.netspective.sparx.form.field.type.DateTimeField">
        <data-type>time-only</data-type>
    </dialog-field-type>
    <dialog-field-type name="date-time" class="com.netspective.sparx.form.field.type.DateTimeField" >
        <data-type>date-and-time</data-type>
    </dialog-field-type>
    <dialog-field-type name="duration" class="com.netspective.sparx.form.field.type.DurationField"/>
    <dialog-field-type name="html" class="com.netspective.sparx.form.field.type.HtmlField"/>
    <dialog-field-type name="file" class="com.netspective.sparx.form.field.type.FileField"/>
    <dialog-field-type name="command" class="com.netspective.sparx.form.field.type.CommandField"/>
    <dialog-field-type name="panels" class="com.netspective.sparx.form.field.type.PanelsField"/>
    <dialog-field-type name="ds-nav-buttons" class="com.netspective.sparx.form.field.type.DataSourceNavigatorButtonsField"/>
    <dialog-field-type name="separator" class="com.netspective.sparx.form.field.type.SeparatorField"/>

    <dialog-field-type name="e-mail" class="com.netspective.sparx.form.field.type.TextField">
        <validation>
            <rule class="com.netspective.commons.validate.rule.TextValueValidationRule"
                  reg-expr="/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]{2,4}$/"
                  invalid-reg-ex-message="Email must be in xxx@xxxx.xxx format."/>
        </validation>
    </dialog-field-type>

    <dialog-field-type name="guid32" class="com.netspective.sparx.form.field.type.TextField">
        <validation>
            <rule class="com.netspective.commons.validate.rule.TextValueValidationRule"
                  reg-expr="/^[A-Z0-9]{8}-[A-Z0-9]{4}-[A-Z0-9]{4}-[A-Z0-9]{4}-[A-Z0-9]{12}$/"
                  invalid-reg-ex-message="Please ensure that this field contains a valid GUID32.&lt;br&gt;The format of a GUID32 is xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx where x is an uppercase letter or digit."/>
        </validation>
    </dialog-field-type>

    <dialog-field-conditional-action name="apply-flags" class="com.netspective.sparx.form.field.conditional.DialogFieldConditionalApplyFlag"/>
    <dialog-field-conditional-action name="display" class="com.netspective.sparx.form.field.conditional.DialogFieldConditionalDisplay"/>

    <navigation-page-conditional-action name="apply-flags" class="com.netspective.sparx.navigate.NavigationConditionalApplyFlag"/>

    <dialog-field-type name="ant-build-property" class="com.netspective.sparx.ant.AntBuildDialogPropertyField"/>

    <dialog-type name="ant-build" class="com.netspective.sparx.ant.AntBuildDialog">
        <frame heading="Ant Build"/>
        <field name="project-id" type="text" caption="Registered Ant Project Id" read-only="yes"/>
        <field name="project-file" type="text" caption="Registered Ant Project File" read-only="yes"/>
        <field name="target" type="select" caption="Execute Target" style="combo" required="yes"/>
    </dialog-type>

    <dialog-execute-handler name="command" class="com.netspective.sparx.form.handler.DialogExecuteCommandHandler"/>
    <dialog-execute-handler name="template" class="com.netspective.sparx.form.handler.DialogExecuteFreemarkerTemplateHandler"/>
    <dialog-execute-handler name="include" class="com.netspective.sparx.form.handler.DialogExecuteIncludeResourceHandler"/>
    <dialog-execute-handler name="panels" class="com.netspective.sparx.form.handler.DialogExecutePanelsHandler"/>
    <dialog-execute-handler name="style-sheet" class="com.netspective.sparx.form.handler.DialogExecuteXsltHandler"/>

    <register-ant-project id="Project" file="servlet-context-path:/WEB-INF/sparx/ant-build-project.xml" default="yes">
        <dialog type="ant-build"/>
    </register-ant-project>

</xdm:container>
