<?xml version="1.0" encoding="utf-8"?>

<project name="manage-test-apps" default="sparx.copy-standard-items">

    <description>
        This project helps manage the Framework test applications. Provides targets that help to globally
        maintain the test applications (such as copying standard files across test apps).
    </description>

    <target name="sparx.init">
        <property name="sparx.test-apps.home" value="${basedir}"/>
        <property name="sparx.primary-test-app.name" value="sparx-test-app-00"/>
        <property name="sparx.primary-test-app.home" value="${sparx.test-apps.home}/${sparx.primary-test-app.name}"/>
    </target>

    <target name="sparx.show-properties" depends="sparx.init">
        <echo message="sparx.test-apps.home = ${sparx.test-apps.home}"/>
        <echo message="sparx.primary-test-app.name = ${sparx.primary-test-app.name}"/>
        <echo message="sparx.primary-test-app.home = ${sparx.primary-test-app.home}"/>
    </target>

    <target name="sparx.copy-standard-items" depends="sparx.init" description="Copy files that are standard to Sparx from the 'primary' test app to all the other test apps.">
        <fileset id="standard-items" dir="${sparx.primary-test-app.home}">
            <include name="WEB-INF/sparx/conf/**"/>
            <include name="WEB-INF/sparx/ant-build-project.xml"/>
        </fileset>

        <copy todir="${sparx.test-apps.home}/sparx-test-app-01">
            <fileset refid="standard-items"/>
        </copy>
        <copy todir="${sparx.test-apps.home}/sparx-test-app-02">
            <fileset refid="standard-items"/>
        </copy>
        <copy todir="${sparx.test-apps.home}/sparx-test-app-03">
            <fileset refid="standard-items"/>
        </copy>
        <copy todir="${sparx.test-apps.home}/sparx-test-app-04">
            <fileset refid="standard-items"/>
        </copy>
    </target>

    <target name="sparx.setup-for-resin" depends="sparx.init" description="Performs tasks necessary to setup applications for use under Caucho Resin app server">
        <copy tofile="${sparx.test-apps.home}/sparx-test-app-00/WEB-INF/web.xml" file="${sparx.test-apps.home}/sparx-test-app-00/WEB-INF/sparx/conf/resin-web.xml"/>
        <copy tofile="${sparx.test-apps.home}/sparx-test-app-01/WEB-INF/web.xml" file="${sparx.test-apps.home}/sparx-test-app-01/WEB-INF/sparx/conf/resin-web.xml"/>
        <copy tofile="${sparx.test-apps.home}/sparx-test-app-02/WEB-INF/web.xml" file="${sparx.test-apps.home}/sparx-test-app-02/WEB-INF/sparx/conf/resin-web.xml"/>
        <copy tofile="${sparx.test-apps.home}/sparx-test-app-03/WEB-INF/web.xml" file="${sparx.test-apps.home}/sparx-test-app-03/WEB-INF/sparx/conf/resin-web.xml"/>
        <copy tofile="${sparx.test-apps.home}/sparx-test-app-04/WEB-INF/web.xml" file="${sparx.test-apps.home}/sparx-test-app-04/WEB-INF/sparx/conf/resin-web.xml"/>
    </target>

</project>
