<?xml version="1.0"?>

<xdm:container xmlns:xdm="http://www.netspective.org/Framework/Commons/XMLDataModel">

    <!-- setup attributes for all input demos -->
    <dialog-type name="input-sample">
        <allow-view-source>yes</allow-view-source>
        <redirect-after-execute>no</redirect-after-execute>
    </dialog-type>

    <!--
       ==============================================================================
       This dialog package contains various dialogs for demonstrating NEFS built-in
       fields and their respective funtionalities.
       ==============================================================================
    -->
    <dialogs package="form.input">

        <dialog type="input-sample" name="text-fields" hide-hints-until-focus="yes">
            <frame heading="Test Text Fields"/>
            <field name="text_field_required" type="text" caption="Text Required" required="yes"
                                              hint="This text field is always required"/>
            <field name="text_field_hidden" type="text" hidden="yes" default="request:id"/>
            <field name="static_field1" type="static" caption="Static 1" default="request:id"
                                        hint="Request attribute 'id' value"/>
            <field name="static_field2" type="static" caption="Static 2 " default="Static Field's Value"/>
            <field name="text_field_conditionally_required" type="text" caption="Text Required"
                hint="Text field is required only when req param 'abc' has value"
                default="conditional Required Text" required="no">
                <conditional action="apply-flags" flags="required" has-value="request:abc"/>
            </field>
            <field name="text_field" type="text" caption="Text" max-length="5" uppercase="yes"
                                     hint="Text field optional (max-length=5, uppercase=yes)" />
            <field name="email_field" type="e-mail" caption="Email" hint="Email field"/>
            <field name="masked_field" type="text" caption="Masked Field" mask-entry="yes" hint="e.g password"/>
        </dialog>

        <dialog type="input-sample" name="memo-and-html-fields">
            <frame heading="Test Memo and HTML Fields"/>
            <field type="memo" name="memo_field_01" caption="Memo Field" default="A fox jumped over the fence" max-length="10"
                hint="Max length is 5 characters"/>
            <field name="html" type="html" caption="HTML Template Field">
                <body>
                    <![CDATA[
                    <div class='textbox'>
                    This is a FreeMarker template inside a dialog (1 + 1 = ${1 + 1}) that looks like a normal field.
                    </div>]]>
                </body>
            </field>
            <field name="html2" type="html">
                <body>
                    <![CDATA[
                    <div class='textbox' style='border:1px solid black; margin: 4px; padding: 6px'>
                    This is another FreeMarker template inside a dialog (1 + 1 = ${1 + 1}) taking over the entire row.
                    With custom CSS and HTML.
                    </div>]]>
                </body>
            </field>
            <director submit-caption="Submit" style="acknowledge"/>
        </dialog>

        <dialog type="input-sample" name="numeric-fields">
            <frame heading="Test Numeric Fields"/>
            <field type="integer" name="integer_field" caption="Integer Field" hint="Integer field" persist="yes"/>
            <field type="float" name="float_field" caption="Float Field" hint="Float field"/>
            <field type="currency" name="currency_field1" caption="Currency" decimals-required="2" default="123.45"
                negative-pos="after-symbol" hint="Currency field (US) with negative sign after the symbol"/>
            <field type="currency" name="currency_field2" caption="Currency" decimals-required="2" default="123.45"
                negative-pos="before-symbol" hint="Currency field (US) with negative sign before the symbol"/>
            <field type="phone" name="phone_field1" caption="Phone Field (dash format)" strip-brackets="yes" style="dash" hint="Phone field" default="8001234567"/>
            <field type="phone" name="phone_field2" caption="Phone Field (bracket format)" strip-brackets="yes" style="bracket" hint="Phone field" default="8001234567"/>
            <field type="zip-code" name="zip_field" caption="Zip Field" hint="Zip code field" default="12345"/>
            <field type="ssn" name="ssn_field" caption="SSN" strip-dashes="yes" default="999999999" hint="Social Security Number field"/>
            <director submit-caption="Submit"/>
        </dialog>

        <dialog type="input-sample" name="date-fields">
            <frame heading="Test Date/Time Fields"/>
            <field type="duration" name="duration_field" caption="Duration Field" begin-min-value="10/20/1900" end-max-value="today" hint="Format is MM/dd/yyyy"/>
            <field type="date" name="date_field_strict" caption="Date (Strict Year)" format="MM-dd-yyyy" client-calendar-format="MM-dd-yyyy"
                default="today" hint="Format is MM-dd-yyyy"/>
            <field type="date" name="date_field_nonstrict" caption="Date (Non-Strict Year)" client-calendar-format="MM/dd/yyyy"
                strict-year="no" default="today+1" hint="Format is MM/dd/yyyy"/>
            <field type="time" name="time_field" caption="Time" strict-time="no" initial-focus="yes" default="now" hint="Format is HH\:mm"/>
            <field type="date-time" name="datetime_field" caption="Date and Time" format="MM-dd-yyyy HH:mm" client-calendar-format="MM-dd-yyyy"
                default="today" hint="Format is MM-dd-yyyy"/>
            <director submit-caption="Submit"/>
        </dialog>

        <dialog type="input-sample" name="boolean-fields">
            <frame heading="Test Boolean Fields"/>
            <field type="boolean" name="bool_field_radio" caption="Boolean Field (Radio)" style="radio"/>
            <field type="boolean" name="bool_field_alone" caption="Boolean Field (Alone)" style="check-alone"/>
            <field type="boolean" name="bool_field_combo" caption="Boolean Field (Combo)" style="combo"/>
            <director submit-caption="Submit"/>
        </dialog>

        <!-- The text-list value source accepts a process instruction [] which can contain two
                 characters: second one is used for value assignment and first one is for choice item
                 seperation. For example, [;=] indicates that the ';' is used to separate the choice items
                 while the '=' is used for value assignment.
        -->
        <dialog type="input-sample" name="select-fields">
            <frame heading="Test Select Fields"/>
            <field type="separator" heading="Select Fields"/>
            <field type="select" name="sel_field_combo" caption="Select Field (Combo)" style="combo"
                choices="text-list:Choice 1=A'S;Choice 2=B;Choice 3=C" persist="true"
                default="A'S" hidden="no" prepend-blank="yes" append-blank="yes"/>

            <field type="select" name="sel_field_combo_xml_items" caption="Select Field (Combo with XML Items)" style="combo"
                persist="true" default="A'S" hidden="no" prepend-blank="yes" append-blank="yes">
                <items>
                    <item value="A" caption="Choice 1 (in XML Item)"/>
                    <item value="B" caption="Choice 2 (in XML Item)"/>
                    <item value="C" caption="Choice 3 (in XML Item)"/>
                    <item value="D" caption="Choice 4 (in XML Item)"/>
                    <item value="E" caption="Choice 5 (in XML Item)"/>
                </items>
            </field>

            <field type="select" name="sel_field_radio" caption="Select Field (Radio)" style="radio" required="no"
                choices="text-list:[;!]Choice 1!A;Choice 2!B;Choice 3!C"/>
            <field type="select" name="sel_field_list" caption="Select Field (List)" style="list" size="5" default="B"
                hidden="no" choices="text-list:Choice 1=A;Choice 2=B;Choice 3=C"/>
            <field type="select" name="sel_field_multilist" caption="Select Field (MultiList)" style="multilist" size="5"
                default="text-list:A,B"
                choices="text-list:Choice 1=A;Choice 2=B;Choice 3=C"/>
            <field type="select" name="sel_field_multicheck" caption="Select Field (MultiCheck)" style="multicheck" required="yes"
                choices="text-list:Choice 1=A;Choice 2=B;Choice 3=C" default="text-list:A,C"/>
            <field type="select" name="sel_field_multidual" caption="Select Field (MultiDual)" style="multidual" required="yes"
                choices="text-list:Choice 1=A;Choice 2=B;Choice 3=C" default="text-list:A" persist="true"
                multi-dual-caption-left="Left Caption" multi-dual-caption-right="Right Caption" multi-dual-width="100"/>
            <director submit-caption="Submit"/>
            <field type="select" name="sel_field_popup" caption="Select Field (Popup)" style="popup"
                choices="text-list:Choice 1=A;Choice 2=B;Choice 3=C"/>
        </dialog>

        <dialog type="input-sample" name="grid-and-composite-fields">
            <frame heading="Test Grid and Composite Field"/>
            <field type="separator" heading="Grid" />
            <grid name="grid-01" caption="Grid Test">
                <row name="row-01" caption="Row 1">
                    <field type="integer" name="integer_field_01" size="3" max-length="3" caption="A" default="1"/>
                    <field type="integer" name="integer_field_02" size="3" max-length="3" caption="B" default="2"/>
                    <field type="integer" name="integer_field_03" size="3" max-length="3" caption="C" default="3"/>
                    <field type="integer" name="integer_field_04" size="3" max-length="3" caption="D" default="4"/>
                </row>
                <row name="row-02" caption="Row 2">
                    <field type="integer" name="integer_field_01" size="3" max-length="3" caption="A"/>
                    <field type="integer" name="integer_field_02" size="3" max-length="3" caption="B"/>
                    <field type="integer" name="integer_field_03" size="3" max-length="3" caption="C"/>
                    <field type="integer" name="integer_field_04" size="3" max-length="3" caption="D"/>
                    <field type="integer" name="integer_field_05" size="3" max-length="3" caption="E"/>
                </row>
            </grid>

            <field type="separator" heading="Composite" column-break-before="yes"/>
            <composite name="composite-01" caption="*">
                <field type="text" caption="Field A" size="5" name="text_field_01" default="default" hint="Testing..."/>
                <field type="text" caption="Field B" size="6" name="text_field_02" default="default" hint="Testing..."/>
                <field type="text" caption="Field C" size="7" name="text_field_03" default="default" hint="Testing..."/>
            </composite>
        </dialog>

        <dialog type="input-sample" name="conditional-fields">
            <frame heading="Test Conditionals"/>
            <field type="html">
                <body>
                    <![CDATA[
                    <div class="textbox">
                    The best explanation about what <i>conditional</i> fields are is to &quot;play&quot; with the<br>
                    fields below, so go ahead and follow the hint texts shown in the dialog.<br><br>

                    Now that you're familiar with how they work in this example, you can see that<br>
                    <i>conditional</i> fields are fields whose state depends upon the state of other<br>
                    entities (in this case, other fields called <i>partner</i> fields).
                    </div>
                    <hr/>
                    ]]>
                </body>
            </field>
            <field type="select" name="sel_field_list" caption="Select Field (Combo)" style="combo" size="5"
                choices="text-list:Choice 1=A;Choice 2=B;Choice 3=C" prepend-blank="yes" hint="Partner field is hidden. Select 'Choice 2' to see it."/>
            <field type="text" name="static_field" caption="Partner Field" default="Here I am!" hint="Partner field of Select Field (Combo)">
                <conditional action="display" partner-field-name="sel_field_list" expression="control.selectedIndex == 2"/>
            </field>
            <field type="boolean" name="checkbox_field" caption="Checkbox" style="check-alone" hint="Click me to see my hidden static field."/>
            <field type="static" name="static_field2" default="Checkbox checked!">
                <conditional action="display" partner-field-name="checkbox_field" expression="control.checked == true"/>
            </field>
        </dialog>

        <dialog type="input-sample" name="popup-fields">
            <frame heading="Test Popup"/>
            <field type="select" name="sel_field_list" caption="Select Field" style="combo"
                prepend-blank="yes" choices="text-list:Choice 1=A;Choice 2=B;Choice 3=C"/>
            <field type="text" name="text_field" caption="Text Field" read-only="browser" default="None at this moment"
                hint="Click on the icon to select a value">
                <popup action="servlet-context-uri:/test-popup" fill="text_field"/>
            </field>
        </dialog>

        <!-- Dialog for testing data perspective conditionals -->
        <dialog type="input-sample" name="data-perspective-conditionals">
            <frame heading="Test Data Perspective Conditionals"/>
            <field type="boolean" name="checkbox_field" caption="Checkbox" style="check-alone"/>
            <field type="static" name="static_field2" default="Checkbox checked!" hint="Hidden static field">
                <conditional action="display" partner-field-name="checkbox_field" expression="control.checked == true"/>
            </field>
            <field type="text" name="text_field_1" caption="Text Field" size="50" hint="Read only when data_perspective is 'ADD'"
                default="I guess the data command is not 'add'">
                <conditional action="apply-flags" flags="read_only" perspective="add"/>
            </field>
            <field type="select" name="select_field" caption="Select Field" style="combo"
                choices="text-list:Choice 1=Choice 1's value;Choice 2=Choice 2's value;Choice 3=Choice 3's value" default="Choice 1's value">
                <conditional action="apply-flags" flags="unavailable" perspective="add"/>
            </field>
            <field type="static" name="static_field_4" default="The data command is not 'add' or 'edit'">
                <conditional action="apply-flags" flags="unavailable" perspective="add"/>
                <conditional action="apply-flags" flags="unavailable" perspective="edit"/>
            </field>
        </dialog>

        <!-- Dialog for testing binding query data to fields -->
        <dialog type="input-sample" name="data-binding">
            <frame heading="Test Data Binding"/>
            <field type="text" name="text_field" caption="Text Field" default="query:org.name-only,-,-,request:org_id"
                hint="The parameter is being provided in the value source"/>
            <field type="select" name="select_field_01" caption="Combo Field showing Query Columns" style="combo"
                choices="query:library.get-all-book-types" hint="The parameters are specified inside the SQL XML"/>
            <field type="select" name="select_field_02" caption="Radio Field showing Query Rows" style="radio"
                choices="query:library.get-all-book-types" hint="The parameters are specified inside the SQL XML"/>
            <field type="select" name="select_field_03" caption="Checkbox Field showing Query Rows" style="multicheck"
                choices="query:library.get-all-book-types"/>
            <field type="select" name="select_field_04" caption="Listbox Field showing Query Rows" style="multilist"
                choices="query:library.get-all-book-types"/>
        </dialog>

        <!-- Dialog for testing pending data -->
        <dialog type="input-sample" name="pending-data" allow-pending-data="yes">
            <frame  heading="Test Pending Data" />
			<field type="separator" heading="Text Fields"/>
			<field type="text" name="text_field_hidden" hidden="yes" default="request:id"/>
			<field type="static" name="static_field" caption="Test " default="Static Field's Value"/>
			<field type="text" name="text_field_required" caption="Text Required" hint="Text field required" required="yes"/>
			<field type="text" name="text_field" caption="Text" hint="Text field optional" default="Sponsor's name" max-length="5" uppercase="yes"/>
			<field type="text" name="text_field_email" caption="Text Email" hint="Text field with regular expression checking"
                regexpr="/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/"
                invalid-reg-ex-message="Invalid email format."/>
			<field type="e-mail" name="email_field" caption="Email"/>
			<field type="separator" heading="Numeric Fields"/>
			<field type="integer" name="integer_field" caption="Integer Field" hint="Integer field"/>
			<field type="float" name="float_field" caption="Float Field" hint="Float field"/>
			<field type="currency" name="currency_field" caption="Currency" decimals-required="2" locale="US" default="123.45" negative-pos="after-symbol"/>
			<field type="phone" name="phone_field1" caption="Phone Field (dash format)" strip-brackets="yes" style="dash" hint="Phone field" default="8001234567"/>
			<field type="phone" name="phone_field2" caption="Phone Field (bracket format)" strip-brackets="yes" style="bracket" hint="Phone field" default="8001234567"/>
			<field type="zip-code" name="zip_field" caption="Zip Field" hint="Zip code field" default="12345"/>
			<field type="ssn" name="ssn_field" caption="SSN" strip-dashes="yes" default="999999999"/>

			<director submit-caption="Submit" pending-caption=" Pending "/>
		</dialog>

        <!-- Dialog for testing uploading files -->
        <dialog type="input-sample" name="upload-data">
            <frame heading="Test Upload Data"/>
            <field type="text" name="text_field_required" caption="Text Required" hint="Text field required" required="yes"/>
            <field type="file" name="file" caption="File" required="yes"/>
        </dialog>

        <!-- Dialog for testing custom client side javascripts -->
        <dialog type="input-sample" name="client-side-scripts">
            <frame heading="Test Client Side JavaScript"/>
            <client-js href="servlet-context-path:/resources/scripts/test1.js"/>
            <client-js href="servlet-context-path:/resources/scripts/test2.js"/>
            <frame heading="Test Custom Javascript"/>
            <field type="float" name="float_field" caption="Float">
                <client-js event="is-valid" type="extends" js-expr="return testValid(field, control);"/>
                <client-js event="value-changed" type="extends" js-expr="return testNum(field, control);"/>
            </field>
            <field type="integer" name="integer_field" caption="Integer">
                <!--client-js event="is-valid" type="override" js-expr="return testValid(field, control);"/-->
                <client-js event="value-changed" type="extends" js-expr="return testNum(field, control);"/>
                <client-js event="click" type="extends" js-expr="alert('onClick');return true;"/>
                <!-- DON'T TEST get-focus and lose-focus at the same time for Mozilla-based browsers.
                     It throws them into an inifinite alert loop -->
                <!--client-js event="get-focus" type="extends" js-expr="alert('onFocus!');return true;"/-->
                <client-js event="lose-focus" type="extends" js-expr="alert('onBlur!');return true;"/>
                <client-js event="key-press" type="extends" js-expr="alert('onKeypress!');"/>
            </field>
            <field type="ssn" name="ssn_field" caption="SSN">
                <client-js event="is-valid" type="override" js-expr="return true;"/>
                <client-js event="value-changed" type="override" js-expr="return true;"/>
            </field>
        </dialog>

        <!-- Dialog for testing "command" field -->
        <dialog type="input-sample" name="command-fields">
            <frame heading="Test Command Fields"/>
            <field type="command" name="command_field" caption="Command Field" command="list,reference|text-list:Value1=Value 1;Value2=Value 2;Value3=Value 3"/>
        </dialog>

        <!-- Dialog for testing hidden fields -->
        <dialog type="input-sample" name="hidden-fields">
            <frame heading="Test Hidden Fields"/>
            <field type="memo" name="memo_field" caption="Memo Field" default="There are two hidden fields\: text_field_hidden and select_field_hidden"/>
            <field type="text" name="text_field" caption="Text Field" default="Text Field's entry"/>
            <field type="select" name="select_field" caption="Select Field" style="combo"
                choices="text-list:Choice 1=Choice 1's value;Choice 2=Choice 2's value;Choice 3=Choice 3's value"
                default="Choice 1's value"/>
            <field type="text" name="text_field_hidden" caption="Text Field Hidden" hidden="yes"
                default="Hidden Text Field's entry"/>
            <field type="select" name="select_field_hidden" hidden="yes" style="combo"
                choices="text-list:Choice 1=Choice 1's hidden value;Choice 2=Choice 2's hidden value;Choice 3=Choice 3's hidden value"
                default="Choice 1's hidden value" prepend-blank="yes" append-blank="yes"/>
        </dialog>
    </dialogs>

</xdm:container>