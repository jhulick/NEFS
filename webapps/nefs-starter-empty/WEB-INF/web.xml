<?xml version="1.0"?>

<web-app>
    <!--
    *********************************************************************
    * The following classpath and path-mapping entries will work only   *
    * in Resin (2.1 or above) and are designed for developers that are  *
    * actively modifying frameworks (like Sparx) and are using an IDE.  *
    * The convenience is that the developer can point to the compiled   *
    * class files without having to copy them into JARs and placing it  *
    * within an application's WEB-INF.                                  *
    *********************************************************************
    -->

    <classpath id='c:\Projects\Frameworks\Commons\conf'/>
    <classpath id='c:\Projects\Frameworks\Commons\lib\redist' library-dir='true'/>
    <classpath id='c:\Projects\Frameworks\Axiom\lib\redist' library-dir='true'/>
    <classpath id='c:\Projects\Frameworks\Sparx\lib\redist' library-dir='true'/>
    <classpath id='c:\Projects\Frameworks\tools\idea\classes'/>
    <!-- these are added because of conf/*.xml resource files are here -->
    <classpath id='c:\Projects\Frameworks\Commons\src\java\main' compile='false'/>
    <classpath id='c:\Projects\Frameworks\Axiom\src\java\main' compile='false'/>
    <classpath id='c:\Projects\Frameworks\Sparx\src\java\main' compile='false'/>

	<path-mapping url-pattern='/sparx/*' real-path='c:\Projects\Frameworks\Sparx\resources'/>

    <!--
    *********************************************************************
    * Setup application's execution environment.                        *
    *********************************************************************
    -->

    <!-- Setup Sparx components project root file -->
    <context-param>
      <param-name>com.netspective.sparx.PROJECT_FILE_NAME</param-name>
      <param-value>/WEB-INF/sparx/project.xml</param-value>
    </context-param>

	<!-- Setup runtime environment -->
	<context-param>
	  <param-name>com.netspective.sparx.RUNTIME_ENVIRONMENT_FLAGS</param-name>
	  <param-value>DEVELOPMENT | FRAMEWORK_DEVELOPMENT</param-value>
	  <!-- the parameter for the environment flags may be combined using
	       the following vaues:
	       * DEVELOPMENT
	       * TESTING
	       * TRAINING
	       * DEMONSTRATION
	       * PRODUCTION
	       * UNDERGOING_MAINTENANCE
	       * FRAMEWORK_DEVELOPMENT

	       e.g. "PRODUCTION | UNDERGOING_MAINTENANCE" is valid
	    -->
	</context-param>

    <!--
    *********************************************************************
    * Setup application front-controller servlet                        *
    *********************************************************************
    -->
	<servlet>
		<servlet-name>NavigationController</servlet-name>
		<servlet-class>com.netspective.sparx.navigate.NavigationControllerServlet</servlet-class>
	</servlet>

	<servlet-mapping>
		<servlet-name>NavigationController</servlet-name>
		<url-pattern>/app/*</url-pattern>
	</servlet-mapping>

    <!--
    *********************************************************************
    * Setup Netspective Administration Console servlet                  *
    *********************************************************************
    -->
	<servlet>
		<servlet-name>NetspectiveConsole</servlet-name>
		<servlet-class>com.netspective.sparx.console.ConsoleServlet</servlet-class>
	</servlet>

	<servlet-mapping>
		<servlet-name>NetspectiveConsole</servlet-name>
		<url-pattern>/console/*</url-pattern>
	</servlet-mapping>

    <!--
    *********************************************************************
    * Specify the default database connection - the default-data-source *
    * context-param's value is defined as a resource-ref in this        *
    * web.xml file (see below).                                         *
    *********************************************************************
    -->
	<context-param>
	  <param-name>com.netspective.sparx.DEFAULT_DATA_SOURCE</param-name>
	  <param-value>jdbc/default</param-value>
	</context-param>

	<resource-ref>
	  <res-ref-name>jdbc/default</res-ref-name>
	  <res-type>javax.sql.DataSource</res-type>
	  <init-param driver-name="org.hsqldb.jdbcDriver"/>
	  <init-param url="jdbc:hsqldb:${app.docDir}/WEB-INF/database/instance/sample"/>
	  <init-param user="sa"/>
	  <init-param password=""/>
	  <init-param max-connections="20"/>
	  <init-param enable-transaction="false"/>
	</resource-ref>

</web-app>
